from itertools import permutations

def sim(d, p, i):
    inp = [p,i]
    out = []
    p = 0
    def R(d,i,p): return d[p] if i else d[d[p]]
    while True:
        o = d[p] % 100
        i = [int(i) for i in str(d[p])[:-2]]
        i.reverse()
        i += [0] * (4 - len(i))
        if o == 1:
            d[d[p+3]] = R(d,i[0],p+1) + R(d,i[1],p+2)
            p += 4
        elif o == 2:
            d[d[p+3]] = R(d,i[0],p+1) * R(d,i[1],p+2)
            p += 4
        elif o == 3:
            d[d[p+1]] = inp.pop(0)
            p += 2
        elif o == 4:
            out.append(R(d,i[0],p+1))
            p += 2
        elif o == 5:
            if R(d,i[0],p+1) != 0:
                p = R(d,i[1],p+2)
            else:
                p += 3
        elif o == 6:
            if R(d,i[0],p+1) == 0:
                p = R(d,i[1],p+2)
            else:
                p += 3
        elif o == 7:
            if R(d,i[0],p+1) < R(d,i[1],p+2):
                d[d[p+3]] = 1
            else:
                d[d[p+3]] = 0
            p += 4
        elif o == 8:
            if R(d,i[0],p+1) == R(d,i[1],p+2):
                d[d[p+3]] = 1
            else:
                d[d[p+3]] = 0
            p += 4
        elif o == 99:
            return out
        else:
            raise Exception('err')

D=[3,8,1001,8,10,8,105,1,0,0,21,38,63,76,93,118,199,280,361,442,99999,3,9,101,3,9,9,102,3,9,9,101,4,9,9,4,9,99,3,9,1002,9,2,9,101,5,9,9,1002,9,5,9,101,5,9,9,1002,9,4,9,4,9,99,3,9,101,2,9,9,102,3,9,9,4,9,99,3,9,101,2,9,9,102,5,9,9,1001,9,5,9,4,9,99,3,9,102,4,9,9,1001,9,3,9,1002,9,5,9,101,2,9,9,1002,9,2,9,4,9,99,3,9,1002,9,2,9,4,9,3,9,1001,9,1,9,4,9,3,9,1001,9,1,9,4,9,3,9,1001,9,1,9,4,9,3,9,1001,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,101,2,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,1,9,4,9,3,9,101,2,9,9,4,9,99,3,9,102,2,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,102,2,9,9,4,9,3,9,101,1,9,9,4,9,3,9,102,2,9,9,4,9,3,9,102,2,9,9,4,9,3,9,1001,9,1,9,4,9,3,9,102,2,9,9,4,9,3,9,1001,9,1,9,4,9,99,3,9,101,1,9,9,4,9,3,9,101,2,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,101,2,9,9,4,9,3,9,1001,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,102,2,9,9,4,9,3,9,1001,9,1,9,4,9,3,9,1002,9,2,9,4,9,99,3,9,1001,9,1,9,4,9,3,9,102,2,9,9,4,9,3,9,102,2,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,102,2,9,9,4,9,3,9,101,2,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,101,1,9,9,4,9,3,9,1001,9,2,9,4,9,99,3,9,1002,9,2,9,4,9,3,9,102,2,9,9,4,9,3,9,101,2,9,9,4,9,3,9,101,1,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,102,2,9,9,4,9,3,9,101,1,9,9,4,9,3,9,101,2,9,9,4,9,3,9,1002,9,2,9,4,9,99]
msig = 0
for pa in permutations([0,1,2,3,4]):
    sig = 0
    for p in pa:
        sig = sim(D[:], p, sig)[0]
    msig = max(msig, sig)
print(msig)
